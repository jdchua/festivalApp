<% include ../partials/header %>

<!--filters -->
  <form action="/campgrounds" method="GET">
      <div class="form-group filters">
        <span>
          <label for="Show All" class="filterLabel">SORT BY</label>
          <span>
              
            <%if(multiDay || camping || mixed || electronic || search) { %>
              <input class="btn filterBtn" type="submit" value="All">
            <% } else { %>
              <input class="btn" id="selectedBtn" type="submit" value="All">
            <% } %>
              
            <%if (mixed) {%>
              <div class="dropdown" style="display: inline">
                <button class="btn dropdown-toggle" type="button" id="selectedBtn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                  Mixed
                  <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                  <li><input id="genreMore" type="submit" name="electronic" value="Electronic"></li>
                  <li><input id="genreMore" type="submit" name="mixed" value="Mixed"></li>
                  <li><input id="genreMore" type="submit" name="hiphop" value="Hip-Hop"></li>
                </ul>
              </div>
            <% } else if (electronic) { %>
              <div class="dropdown" style="display: inline">
                <button class="btn dropdown-toggle" type="button" id="selectedBtn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                  Electronic
                  <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                  <li><input id="genreMore" type="submit" name="electronic" value="Electronic"></li>
                  <li><input id="genreMore" type="submit" name="mixed" value="Mixed"></li>
                  <li><input id="genreMore" type="submit" name="hiphop" value="Hip-Hop"></li>
                </ul>
              </div>
            <% } else { %>
              <div class="dropdown" style="display: inline">
                <button class="btn filterBtn dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                  Genre
                  <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                  <li><input id="genreMore" type="submit" name="electronic" value="Electronic"></li>
                  <li><input id="genreMore" type="submit" name="mixed" value="Mixed"></li>
                  <li><input id="genreMore" type="submit" name="hiphop" value="Hip-Hop"></li>
                </ul>
              </div>
            <% } %>
                          
            <%if(multiDay) { %>
                <input class="btn" id="selectedBtn" type="submit" name="multiday" value="Multi-Day">
            <% } else { %>
                <input class="btn filterBtn" type="submit" name="multiday" value="Multi-Day">
            <% } %>    
              
            <%if(camping) { %>
                <input class="btn" id="selectedBtn" type="submit" name="camping" value="Camping">
            <% } else { %>
                <input class="btn filterBtn" type="submit" name="camping" value="Camping">
            <% } %>

          </span>
          <span class="hideFilter">
            <i class="fa fa-angle-double-up" aria-hidden="true"></i>
          </span>
        </span>
      </div>
  </form> 
  <div class="hideFilter" id="showFilter"><i class="fa fa-angle-double-down" aria-hidden="true"></i>Show Filters</div>

<!--listings-->
  <% campgrounds.forEach(function(campground){ %>
    <div class="container listing">
        <div class="row">
          <div class="listingImage col-lg-4 col-md-5 col-sm-12 col-xs-12">
            <!--<span class="glyphicon glyphicon-tent numberList"></span>-->
            <a href="/campgrounds/<%= campground._id %>"><img src="<%= campground.image %>"></a>
          </div>
          <div class="listingDiv col-lg-8 col-md-7 col-sm-12 col-xs-12">
            <div class="listingTop">
              <a class = "listingTitle col-lg-8 col-md-8 col-sm-8 col-xs-8" href="/campgrounds/<%= campground._id %>"><%= campground.name %></a>
              <div class="listingLocation col-lg-3 col-md-4 col-sm-3 col-xs-3"><%= campground.location %></div>
            </div>
            <div class="listingDescription"><%= campground.description %></div>
          </div>
          <div class="col-lg-8 col-md-7 col-sm-12 col-xs-12">
            <div class="extraInfo">
              <div class="card-body" id="indexFeatures">
                Genre: <span class="orange"><%= campground.genre %></span>
              </div> 
              <div class="card-body" id="indexFeatures">
                  Multi-Day: 
                  <% if (campground.multiDay === "yes") { %>
                    <span style="color:green;" class="glyphicon glyphicon-ok"></span>
                  <% } else { %>
                    <span style="color:red;" class="glyphicon glyphicon-remove"></span>
                  <% } %>
              </div>  
              <div class="card-body" id="indexFeatures">
                  Camping: 
                  <% if (campground.camping === "yes") { %>
                    <span style="color:green;" class="glyphicon glyphicon-ok"></span>
                  <% } else { %>
                    <span style="color:red;" class="glyphicon glyphicon-remove"></span>
                  <% } %> 
              </div> 
              <div class="card-body listingImage">
                <div class="card-body" id="indexFeatures">
                    All-Ages: 
                    <% if (campground.allAges === "yes") { %>
                      <span style="color:green;" class="glyphicon glyphicon-ok"></span>
                    <% } else { %>
                      <span style="color:red;" class="glyphicon glyphicon-remove"></span>
                    <% } %>                       
                </div>
                <div class="card-body" id="indexFeatures">
                  Price:                     
                  <span>
                    <% if (campground.price >= 400) { %>
                      <% for(var i = 0; i < 4; i++) { %>
                        <i class="fa fa-usd" aria-hidden="true"></i>
                      <% } %>
                    <% } else if (campground.price >= 300 && campground.price < 400) { %>
                      <% for(var i = 0; i < 3; i++) { %>
                        <i class="fa fa-usd"></i>
                      <% } %>
                    <% } else if (campground.price >= 200 && campground.price < 300) { %>
                      <% for(var i = 0; i < 2; i++) { %>
                        <i class="fa fa-usd"></i>
                      <% } %>                       
                    <% } else { %>
                      <% for(var i = 0; i < 1; i++) { %>
                        <i class="fa fa-usd"></i>
                      <% } %>                        
                    <% } %>                      
                  </span>
                </div>
              </div>
            </div>
        </div>
      </div>
    </div>
    <hr>
  <% }); %>

<!--pagnation-->
  <div class="row text-center">
      <% if (pages && pages > 0) { %>
        <ul class="pagination text-center">
          
          <% if (current == 1) { %>
            <li class="disabled"><a>First</a></li>
          <% } else { %>
            <li><a href="/campgrounds<%if(search){%>?search=<%=search%><%}else if(multiDay){%>?multiday=<%=multiDay%><%}else if(camping){%>?camping=<%=camping%><%}else if(electronic){%>?electronic=<%=electronic%><%}else if(mixed){%>?mixed=<%=mixed%><%}%>">First</a></li>
          <% } %>
   
          <% if (current == 1) { %>
            <li class="disabled"><a>«</a></li>
          <% } else { %>
            <li><a href="/campgrounds?page=<%= Number(current) - 1 %><%if(search){%>?search=<%=search%><%}else if(multiDay){%>&multiday=<%=multiDay%><%}else if(camping){%>&camping=<%=camping%><%}else if(electronic){%>&electronic=<%=electronic%><%}else if(mixed){%>&mixed=<%=mixed%><%}%>">«</a></li>
          <% } %>
   
          <% var i = (Number(current) > 5 ? Number(current) - 4 : 1) %>
            <% if (i !== 1) { %>
              <li class="disabled"><a>...</a></li>
            <% } %>
          <% for (; i <= (Number(current) + 4) && i <= pages; i++) { %>
            <% if (i == current) { %>
              <li class="active"><a><%= i %></a></li>
            <% } else { %>
              <li><a href="/campgrounds?page=<%= i %><%if(search){%>?search=<%=search%><%}else if(multiDay){%>&multiday=<%=multiDay%><%}else if(camping){%>&camping=<%=camping%><%}else if(electronic){%>&electronic=<%=electronic%><%}else if(mixed){%>&mixed=<%=mixed%><%}%>"><%= i %></a></li>
            <% } %>
            <% if (i == Number(current) + 4 && i < pages) { %>
              <li class="disabled"><a>...</a></li>
            <% } %>
          <% } %>
   
          <% if (current == pages) { %>
            <li class="disabled"><a>»</a></li>
          <% } else { %>
            <li><a href="/campgrounds?page=<%= Number(current) + 1 %><%if(search){%>?search=<%=search%><%}else if(multiDay){%>&multiday=<%=multiDay%><%}else if(camping){%>&camping=<%=camping%><%}else if(electronic){%>&electronic=<%=electronic%><%}else if(mixed){%>&mixed=<%=mixed%><%}%>">»</a></li>
          <% } %>
   
          <% if (current == pages) { %>
            <li class="disabled"><a>Last</a></li>
          <% } else { %>
            <li><a href="/campgrounds?page=<%= pages %><%if(search){%>?search=<%=search%><%}else if(multiDay){%>&multiday=<%=multiDay%><%}else if(camping){%>&camping=<%=camping%><%}else if(electronic){%>&electronic=<%=electronic%><%}else if(mixed){%>&mixed=<%=mixed%><%}%>">Last</a></li>
          <% } %>
      </ul>
      <% } %>
  </div>
    

<% include ../partials/footer %>